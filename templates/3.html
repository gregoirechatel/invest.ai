<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Étape 3 - CTO vs PEA</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 40px; background: #f8f8f8; }
    h1 { margin-bottom: 20px; }
    p { margin-bottom: 20px; font-size: 18px; }

    .page { display: none; }
    .page.active { display: block; }

    .cards { display: flex; justify-content: center; gap: 40px; margin-top: 20px; }
    .card {
      width: 250px; height: 150px;
      perspective: 1000px; cursor: pointer;
    }
    .inner {
      position: relative; width: 100%; height: 100%;
      transition: transform 0.6s; transform-style: preserve-3d;
    }
    .card.flipped .inner { transform: rotateY(180deg); }
    .front, .back {
      position: absolute; width: 100%; height: 100%;
      backface-visibility: hidden;
      display: flex; align-items: center; justify-content: center;
      border-radius: 8px; font-weight: bold; font-size: 16px;
      padding: 10px; text-align: center;
    }
    .front { background: #4CAF50; color: white; }
    .back { background: white; color: #333; transform: rotateY(180deg); }

    .btn {
      display: inline-block; margin-top: 30px;
      padding: 12px 20px; background: #4CAF50; color: white;
      border-radius: 6px; text-decoration: none; cursor: pointer;
      transition: 0.3s;
    }
    .btn:hover { background: #45a049; }

    /* Styles pour le jeu d'association */
    .columns { display: flex; justify-content: center; gap: 50px; margin-top: 30px; }
    .column {
      width: 200px; min-height: 250px; border: 2px dashed #ccc;
      border-radius: 8px; padding: 10px;
    }
    .affirmation {
      background: #ddd; margin: 8px; padding: 10px;
      border-radius: 6px; cursor: grab;
    }
    .correct { background: #4CAF50 !important; color: white; }
    .wrong { background: #f44336 !important; color: white; }
  </style>
</head>
<body>

  <!-- Page Intro -->
  <div id="page-intro" class="page active">
    <h1>Étape 3 : Les comptes pour investir</h1>
    <p>Il existe deux grands comptes pour investir en bourse : le CTO et le PEA.<br>
       Tu vas découvrir leurs <b>avantages</b>, leurs <b>conditions</b>, leurs <b>règles de retrait</b> et un petit <b>jeu</b> pour tester tes connaissances.</p>
    <button class="btn" onclick="nextPage('page-avantages')">➡ Suivant</button>
  </div>

  <!-- Page Avantages -->
  <div id="page-avantages" class="page">
    <h1>Les avantages des deux types de compte</h1>
    <p>Clique sur les cartes pour voir les avantages.</p>
    <div class="cards">
      <div class="card" onclick="this.classList.toggle('flipped')">
        <div class="inner">
          <div class="front">CTO</div>
          <div class="back">✔ Accessible à tous<br>✔ Actions du monde entier<br>✔ Pas de plafond</div>
        </div>
      </div>
      <div class="card" onclick="this.classList.toggle('flipped')">
        <div class="inner">
          <div class="front">PEA</div>
          <div class="back">✔ Avantage fiscal après 5 ans<br>✔ Exonération d'impôt<br>✔ Idéal long terme</div>
        </div>
      </div>
    </div>
    <button class="btn" onclick="nextPage('page-conditions')">➡ Suivant</button>
  </div>

  <!-- Page Conditions -->
  <div id="page-conditions" class="page">
    <h1>Les conditions d’ouverture</h1>
    <p>Clique sur les cartes pour voir les conditions.</p>
    <div class="cards">
      <div class="card" onclick="this.classList.toggle('flipped')">
        <div class="inner">
          <div class="front">CTO</div>
          <div class="back">✔ Ouvert à tous<br>✔ Pas de limite de versement<br>✔ Simple à ouvrir</div>
        </div>
      </div>
      <div class="card" onclick="this.classList.toggle('flipped')">
        <div class="inner">
          <div class="front">PEA</div>
          <div class="back">✔ Réservé aux résidents fiscaux FR<br>✔ Plafond 150k €<br>✔ Durée minimale 5 ans</div>
        </div>
      </div>
    </div>
    <button class="btn" onclick="nextPage('page-retraits')">➡ Suivant</button>
  </div>

  <!-- Page Retraits -->
  <div id="page-retraits" class="page">
    <h1>Les règles de retrait</h1>
    <p>Clique sur les cartes pour voir ce qui se passe quand tu retires ton argent.</p>
    <div class="cards">
      <div class="card" onclick="this.classList.toggle('flipped')">
        <div class="inner">
          <div class="front">CTO</div>
          <div class="back">❌ Retrait = flat tax 30%<br>✔ Retraits à tout moment<br>✔ Très flexible</div>
        </div>
      </div>
      <div class="card" onclick="this.classList.toggle('flipped')">
        <div class="inner">
          <div class="front">PEA</div>
          <div class="back">❌ Retrait avant 5 ans = perte avantage fiscal<br>✔ Après 5 ans = exonération d'impôt<br>✔ Idéal long terme</div>
        </div>
      </div>
    </div>
    <button class="btn" onclick="nextPage('page-jeu')">➡ Suivant</button>
  </div>

  <!-- Page Jeu -->
  <div id="page-jeu" class="page">
    <h1>Jeu : CTO ou PEA ?</h1>
    <p>Glisse chaque affirmation dans la bonne colonne puis clique sur Valider.</p>
    
    <div class="columns">
      <div id="cto" class="column" ondrop="drop(event, 'CTO')" ondragover="allowDrop(event)">
        <h3>CTO</h3>
      </div>
      <div id="pea" class="column" ondrop="drop(event, 'PEA')" ondragover="allowDrop(event)">
        <h3>PEA</h3>
      </div>
    </div>

    <div id="affirmations">
      <div class="affirmation" draggable="true" ondragstart="drag(event)" data-answer="CTO">Pas de plafond de versement</div>
      <div class="affirmation" draggable="true" ondragstart="drag(event)" data-answer="PEA">Exonération d’impôt après 5 ans</div>
      <div class="affirmation" draggable="true" ondragstart="drag(event)" data-answer="CTO">Actions du monde entier accessibles</div>
      <div class="affirmation" draggable="true" ondragstart="drag(event)" data-answer="PEA">Plafond 150k €</div>
      <div class="affirmation" draggable="true" ondragstart="drag(event)" data-answer="CTO">Retraits possibles à tout moment</div>
      <div class="affirmation" draggable="true" ondragstart="drag(event)" data-answer="PEA">Réservé aux résidents fiscaux FR</div>
      <div class="affirmation" draggable="true" ondragstart="drag(event)" data-answer="CTO">Chaque retrait = flat tax 30%</div>
      <div class="affirmation" draggable="true" ondragstart="drag(event)" data-answer="PEA">Idéal pour préparer sa retraite</div>
      <div class="affirmation" draggable="true" ondragstart="drag(event)" data-answer="CTO">Ouvert à tous sans condition</div>
      <div class="affirmation" draggable="true" ondragstart="drag(event)" data-answer="PEA">Retrait avant 5 ans = perte avantage fiscal</div>
    </div>

    <button class="btn" onclick="validate()">✅ Valider</button>
    <a href="/" class="btn">⬅ Retour au chemin</a>
  </div>

  <script>
    function nextPage(id) {
      document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    function allowDrop(ev) { ev.preventDefault(); }
    function drag(ev) { ev.dataTransfer.setData("text", ev.target.id); }
    function drop(ev, column) {
      ev.preventDefault();
      const data = ev.dataTransfer.getData("text");
      const el = document.getElementById(data);
      ev.target.appendChild(el);
    }

    function validate() {
      document.querySelectorAll(".affirmation").forEach(el => {
        const parent = el.parentElement.id;
        if (el.dataset.answer === parent.toUpperCase()) {
          el.classList.add("correct");
          el.classList.remove("wrong");
        } else {
          el.classList.add("wrong");
          el.classList.remove("correct");
        }
      });
    }
  </script>

</body>
</html>
